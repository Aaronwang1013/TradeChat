{% extends "index.html" %}

{% block content %}
    <div class="discussion-content">
        <h2>Discussion Page</h2>
        <p>Welcome to the discussion page. Please select a company or the overall economy to comment on:</p>


        <form id="comment-form" action="/post_comment" method="POST">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"> 
            <label for="company">Select a company or overall economy:</label>
            <select id="company" name="company">
                <option value="overall">Overall Economy</option>
                <option value="NVDA">NVDA</option>
                <option value="GOOG">GOOG</option>
                <option value="AMZN">AMZN</option>
                <option value="TSLA">TSLA</option>
                <option value="META">META</option>
                <option value="MSFT">MSFT</option>
                <option value="AAPL">AAPL</option>
            </select>
            <br>
            <label for="comment">Comment:</label>
            <textarea id="comment" name="comment" rows="4" cols="50" required></textarea><br>
            <button type="submit">Submit</button>
        </form>


        <div id="comments">
            {% for comment in comments %}
                <div class="comment">
                    <div class="comment-header">
                        <span class="comment-username">{{ comment.username }}: {{ comment.comment }}</span>
                        <span class="comment-timestamp">{{ comment.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</span>
                    </div>
                </div>
            {% endfor %}
        </div>
        <a href="{{ url_for('profile') }}" class="user-icon">
            <img src="{{ url_for('static', filename='images/user.png') }}" alt="Profile">
            {% if username %}
                <p>Hi, {{ username }}!</p>
            {% endif %}
        </a>   
    </div>
{% endblock %}
